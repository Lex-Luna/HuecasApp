<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             NavigationPage.HasNavigationBar="False"
             xmlns:degradado="clr-namespace:Xamarin.Forms.PancakeView;assembly=Xamarin.Forms.PancakeView"
             x:Class="HuecasAppUsers.Vista.PagCommunity">
    
    <Grid RowDefinitions="auto,auto,auto,auto,*"
          BackgroundColor="#1C1D22">
        <!--Stack Titulo-->
        <StackLayout Orientation="Horizontal" Grid.Row="0" 
                     Margin="15" HorizontalOptions="Center">
            <Label Text="Community"
                       TextColor="#E68D08"
                       FontSize="30"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"/>
        </StackLayout>
        <degradado:PancakeView Grid.Row="1"
                               Margin="5"
                               CornerRadius="15"
                               BackgroundGradientStartPoint="0.9,0.1"
                               BackgroundGradientEndPoint="0.1,1.0">
            <!--Coloresd del degradado-->
            <degradado:PancakeView.BackgroundGradientStops>
                <degradado:GradientStopCollection>
                    <degradado:GradientStop Color="#0E0F04" Offset="0.0"/>
                    <degradado:GradientStop Color="Blue" Offset="0.9"/>
                </degradado:GradientStopCollection>
            </degradado:PancakeView.BackgroundGradientStops>
            <!--Subtitulo-->
            <StackLayout Margin="10,0,10,0" Padding="10" >
                <Label FontSize="Medium" TextColor="#DEF017" FontAttributes="Bold,Italic"
                       HorizontalTextAlignment="Center"
                    Text="Recomendaciones de la Comunidad de usuarios" />
            </StackLayout>
        </degradado:PancakeView>

        <ScrollView Grid.Row="2" >
            <CollectionView ItemsSource="{Binding LisEncueta1}"  
                            x:Name="EncuestasCommunity">

                <CollectionView.ItemTemplate>
                    <DataTemplate >
                        <Frame BorderColor="Black" Padding="1" BackgroundColor="Black">
                            <!--Agregar el comando ir a DeetalleEncuesta-->
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding Path=BindingContext.IrDetalleEncuestaCommand, 
                                        Source={x:Reference EncuestasCommunity}}" CommandParameter="{Binding .}"/>
                            </Frame.GestureRecognizers>
                            <StackLayout Margin="0,0,0,10" >
                                <!--Degradado-->
                                <StackLayout.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Offset="0.1" Color="#A4FFAA" />
                                        <GradientStop Offset="0.9" Color="Blue" />
                                    </LinearGradientBrush>
                                </StackLayout.Background>
                                <Grid Margin="5" RowDefinitions="Auto,Auto" ColumnDefinitions="230,1,*">
                                    <StackLayout Grid.Row="0" Grid.Column="0" 
                                                     HorizontalOptions="FillAndExpand" 
                                                     Orientation="Horizontal">
                                        <Frame Padding="0" CornerRadius="5" BackgroundColor="Transparent"  
                                                   HasShadow="True" HorizontalOptions="FillAndExpand">
                                            <Label Text="{Binding NomLocal, StringFormat='Local: {0}'}" 
                                                       FontAttributes="Bold" FontSize="16" TextColor="#333" 
                                                       HorizontalTextAlignment="Start" />

                                        </Frame>
                                    </StackLayout>
                                    <!--Nombre del plato-->
                                    <StackLayout Grid.Row="1" Grid.Column="0" Orientation="Horizontal" >
                                        <Frame Padding="0" CornerRadius="5" BackgroundColor="Transparent"  
                                                   HasShadow="True" HorizontalOptions="FillAndExpand">
                                            <Label Text="{Binding NomPlato, StringFormat='Plato: {0}'}" 
                                                       FontAttributes="Bold" FontSize="16" TextColor="#333" 
                                                       HorizontalTextAlignment="Start" />
                                        </Frame>
                                    </StackLayout>
                                    <!--Calificacion del local-->
                                    <StackLayout Grid.Row="1" Grid.Column="2" Orientation="Vertical" 
                                                     VerticalOptions="Center" HorizontalOptions="EndAndExpand">
                                        <Frame CornerRadius="30" BackgroundColor="#E7E114" BorderColor="#D8D8D8"
                                                   HasShadow="True" Padding="5" Opacity="0.7">
                                            <Label Text="{Binding PromCalificacion, StringFormat='Promedio: {0}/10'}" 
                                                       HorizontalTextAlignment="Center" FontSize="18" TextColor="Black" 
                                                       HorizontalOptions="Center" />
                                        </Frame>
                                    </StackLayout>

                                    <!-- Fecha-->
                                    <StackLayout Grid.Row="0" Grid.Column="2" Orientation="Vertical" 
                                                     VerticalOptions="Center" HorizontalOptions="EndAndExpand">
                                        <Frame CornerRadius="5" BackgroundColor="transparent" 
                                                   BorderColor="#D8D8D8" HasShadow="True" Padding="5">
                                            <Label Text="{Binding FechaData, StringFormat=' {0:d MMMM yyyy}'}" 
                                                       HorizontalTextAlignment="Center" FontSize="18" 
                                                       TextColor="White" HorizontalOptions="Center" />
                                        </Frame>
                                    </StackLayout>

                                </Grid>
                            </StackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </ScrollView>
    </Grid>
</ContentPage>